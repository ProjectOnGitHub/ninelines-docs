# Всппомогательные функции

Для облегчения некоторой части базовых настроек в сборку добавленны вспомогательные функций для js и scss.

Их использование не обяхательно, но оно облегчит некоторую часть работы.

## Вспомогательные функции PUG

#### Миксины `lazyElements`


#### Миксин `svg`

Подгрузка свг элемента из файла спрайтов

## Вспомогательные функции JS

- `lastPageYOffset` - содержит позицию скролла после использования `saveScrollPosition`.

- `debounce` - полезен для функций, которые получают/обновляют данные, и мы знаем, что повторный вызов в течение короткого промежутка времени не даст ничего нового, синтаксис похож на `setTimeout`.

- `saveScrollPosition` - полезен при открытии модальных окон, используется для сохранения текущей позиции горизонтального скролла.

- `restoreScrollPosition` - полезен при закрытии модальных окон, используется для сброса сохраненной позиции горизонтального скролла.

- `scrollTo` - плавный скролл до элемента, принимает 3 параметра, элемент до которого нужно скроллить / время анимации / смещение (+/-).

- `getScrollbarWidth` - полез при открытии модальных окон, чтобы контент не прыгал, возвращает ширину скролл-бара.

- `hasHoverSupport` - определяет доступность ховера, на различных устройствах, помогает избежать ховеров на мобилках и планшетах.

- `actualYear` - определяет актуальных год (в основном нужно для копирайтов в футере)

- `backToTop` - Кнопка возврат наверх, есть возможность показывать и скрывать эту кнопку через класс

- `counter` - Счетчик значений больше/меньше + ввод через input

- `dropEye` - Переключатель глаза и показ символов в поле ввода пароля

- `lazyLoading` - Отложенная загрузка изображений + тригер для ручного вызова

- `numberFormat` - Форматирование числа, добавляет тысячный разделитель

- `scrollToAnchor` - Плавный переход к якорю

- `transchoice` - Плюрализация (множественность) текста

Остальные переменные добавленны по мере популярнисти использования на проектах, для каждого проекта этот список можно индивидуально донастроить

## Вспомогательные функции SCSS

- `max / min` - вспомогательные функции для `supports-safe-area-insets`

- `hover / active-hover / active / disabled` - вспомогательные миксины для корректного доступа к ховеру, так же небольшие хелперы для активного/неактивного состояния элементов и ховера при активном состоянии

#### Миксин `supports-safe-area-insets`

Вспомогательный миксин для использования всего пространства экрана на iOs устройствах начиная с iPhone X

Сейчас на большинстве сайтов можно наблюдать такую картину

![safe-area error](images/29/safe-areas-error.png)

Визуально выглядит это плохо и для решения таких проблем появилась возмоность использовать переменные среды агента пользователя (safe-area), которые выглядит следующим образом

![safe-area true](images/29/safe-areas.png)

Начнём сначала, для правильности работы в шапке сайта нужно указывать специальный viewport.

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
```

##### Пример использования safe-area
```scss
    body {
        padding: 12px;

        @include supports-safe-area-insets {
            body {
                padding-top: max(12px, env(safe-area-inset-top))
                padding-right: max(12px, env(safe-area-inset-right))
                padding-bottom: max(12px, env(safe-area-inset-bottom))
                padding-left: max(12px, env(safe-area-inset-left));
            }
        }
    }
```

Разумеется любое из этих 4-х значений можно использовать по отдельности и с любым css свойством, главное знать и понимать когда конкретно это необходимо.
В итоге, при правильном использовании safe-area мы получаем такую картину.

![safe-area success](images/29/safe-areas-success.png)

#### Миксин `text-border`

`text-border($color, $borderColor, $ieColor, $width: 1px, $ieWidth: 1px)` - Вспомогательный миксин для корректного использования окантовки у текста, предусмотрен полифилл для старых IE.

Первые 3 свойства обязательны для заполнения, `$color`: цвет текста в основной массе браузеров, `$borderColor` - цвет окантовки для всех браузеров, `$ieColor` - цвет текста для IE, так в нём недоступно свойство `transparent`, остальные свойства используются редко, поэтому в них добавленны базовые значения

##### Пример использования text-border
```scss
    @include text-border(transparent, #000, #fff);
```

#### Миксин `font-face`

`font-face($url, $font-family, $font-weight, $font-style)` - Вспомогательный миксин для задания шрифтов, все поля обязательны для заполнения

##### Пример использования font-face
```scss
    @include font-face("../fonts/GraphikRBCLC/GraphikRBCLC-Regular", "GraphikRBCLC", 400, normal);
```

#### Миксин `retina`

Вспомогательный миксин для добавления `background-images` для дисплеев с 2х экранами

#### Миксин `placeholder`

Вспомогательный миксин для стилизации подсказок у полей ввода

#### Миксины в папке `libs`

Вспомогательные функции для работы некоторых других функций, так же их можно использовать любом другом месте

#### Миксин `image-rendering`

Качество рендеринга изображений, при использовании `background-size`

#### Миксин `svg-to-data-url`

Преобразует SVG в URL-адрес данных, чтобы этот SVG можно было использовать в качестве фонового изображения

#### Миксин `object-fit`

Миксин добавляет `object-fit` и надстройки для полифилов, так же можно задать позицию

#### Миксин `triangle`

Миксин создаёт треугольник в любую из сторон, можно менять цвет, подходит для кнопок плей
